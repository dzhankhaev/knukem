# Knukem
Графический движок схожий с движком Duke Nukem 3D
## Demo
![Alt text](demo/1_demo.gif?raw=true "Title")

Редактор уровней

![Alt text](demo/edit_1_demo.gif?raw=true "Title")

![Alt text](demo/edit_2_demo.gif?raw=true "Title")

Наложение текстур

![Alt text](demo/edit_3_demo.gif?raw=true "Title")

Изменение высоты сектора и создание дверей

![Alt text](demo/edit_4_demo.gif?raw=true "Title")

Граффити и кнопки

![Alt text](demo/edit_5_demo.gif?raw=true "Title")


![Alt text](demo/2_demo.gif?raw=true "Title")

![Alt text](demo/map.png?raw=true "Title")
## Installation
Для компиляции и запуска требуется установить библиотеку SDL2

```sh
$ sudo apt-get install libsdl2-dev -y
$ sudo apt-get install libsdl2-ttf-dev -y
$ sudo apt-get install libsdl2-image-dev -y
```
В файле includes/engine.h определены постоянные, влияющие на физику мира и отрисовку. Можно изменить перед компиляцией.
Компиляция
```sh
$ make
```
Запуск 
```sh
$ ./doom-nukem map.map
```
## Управление

| Кнопка | Описание |
| ------ | ------ |
| wasd | Ходьба |
| shift | Бег |
| cntrl | Присед |
| X | Ползание |
| space | Прыжок |
| V/C | Режим полета |
| F | Взаимодействие |
| M | Режим миникарты |
| L | Режим освещения |

Доступно в режиме игрока

| Кнопка | Описание |
| ------ | ------ |
| R | Установка кнопки |
| G | Удаление кнопки |

Доступно в 3D режиме редактора

| Кнопка | Описание |
| ------ | ------ |
| E | Переключение между 3д и 2д режимами |
| ` | 0 - установка пола, 1 - потолка, 2 - стен, 3 - нижней линии, 4 - верхней линии |
| 1-9 | Выбор текстуры для установки. Если не граффити, то нанесет текстуру сразу |
| G | Режим граффити. После нажатия доступен выбор текстуры. Повторное нажатие нанесёт граффити на стену и выключит режим. Двойное нажатие нанесёт граффити кнопку|
| Backspace | Удаление всех граффити в секторе |
| O-P | Смена высоты пола |
| J-K | Смена высоты потолка |
| H | Установить/удалить дверь. Нельзя делать дверью соседний сектор |

Граффити можно использовать в качестве кнопок. Если разместить граффити на стене слева или справа от двери, управление дверью будет перехвачено кнопкой.
Игрок может удалять и ставить только граффити с текстурой под номером 0 (граффити кнопка)

Доступно в 2D режиме редактора

| Кнопка | Описание |
| ------ | ------ |
| ЛКМ | Выделение сектора |
| ПКМ | Превращение сектора в дверь (если в секторе нет игрока) |
| Колесо мыши | Установка финального сектора |
| del/Backspace | Удаление выделенного сектора |
| tab | Сохранение карты в файл |
| Е | Переход в 3Д режим |
| Стрелки | Перемещение карты |

Для создания новой карты требуется:
1.  Создать файл nmap.txt, в котором перечислить все текcтуры стен в количестве 10;
2.  Файлы текстур поместить в папку textures;
3.  Запустить игру без аргументов. Карта будет сохранена в файл new_map.txt.

